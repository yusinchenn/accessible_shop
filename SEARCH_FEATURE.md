# 搜尋功能說明

## 功能概述
實現了智能搜尋功能，支援模糊搜尋與優先級排序。

## 搜尋評分系統

搜尋結果按照以下優先級排序（分數由高到低）：

| 優先級 | 匹配類型 | 分數 | 範例 |
|--------|---------|------|------|
| 1 | 商品名稱完全匹配 | 100 | 搜尋「瑜珈墊」→ 找到「瑜珈墊」 |
| 2 | 商品名稱開頭匹配 | 90 | 搜尋「Nike」→ 找到「Nike Air Max 270」 |
| 3 | 商品名稱包含關鍵字 | 80 | 搜尋「Air」→ 找到「Nike Air Max 270」 |
| 4 | 描述完全匹配 | 70 | 搜尋「經典氣墊運動鞋」→ 找到相關商品 |
| 5 | 描述包含關鍵字 | 60 | 搜尋「氣墊」→ 找到描述中包含「氣墊」的商品 |
| 6 | 分類完全匹配 | 50 | 搜尋「運動鞋」→ 找到所有運動鞋 |
| 7 | 分類包含關鍵字 | 40 | 搜尋「運動」→ 找到「運動鞋」、「運動服飾」等 |
| 8 | 模糊匹配（2字以上） | 20/10 | 搜尋「珈墊」→ 找到「瑜珈墊」 |

## 搜尋範例

### 範例 1: 完全匹配
**搜尋**: `瑜珈墊`
**結果排序**:
1. 瑜珈墊 (100分 - 名稱完全匹配)

### 範例 2: 品牌搜尋
**搜尋**: `Nike`
**結果排序**:
1. Nike Air Max 270 (90分 - 名稱開頭匹配)
2. Nike Dri-FIT 運動短褲 (90分 - 名稱開頭匹配)

### 範例 3: 關鍵字搜尋
**搜尋**: `運動`
**結果排序**:
1. 運動水壺 (90分 - 名稱開頭匹配)
2. 運動腰包 (90分 - 名稱開頭匹配)
3. Nike Air Max 270 (60分 - 描述包含「運動」)
4. Under Armour 運動上衣 (80分 - 名稱包含「運動」)
5. Nike Dri-FIT 運動短褲 (80分 - 名稱包含「運動」)
6. Adidas 運動外套 (80分 - 名稱包含「運動」)
7. 智能運動手環 (80分 - 名稱包含「運動」)
8. 所有「運動鞋」分類的商品 (40分 - 分類包含「運動」)
9. 所有「運動服飾」分類的商品 (40分 - 分類包含「運動」)
10. 所有「運動配件」分類的商品 (40分 - 分類包含「運動」)

### 範例 4: 分類搜尋
**搜尋**: `運動鞋`
**結果排序**:
1. Nike Air Max 270 (50分 - 分類完全匹配)
2. Adidas Ultraboost 22 (50分 - 分類完全匹配)
3. New Balance 574 (50分 - 分類完全匹配)

### 範例 5: 模糊搜尋
**搜尋**: `珈墊`
**結果排序**:
1. 瑜珈墊 (20分 - 模糊匹配)
2. 瑜珈磚 (20分 - 模糊匹配)

## 實現細節

### DatabaseService.searchProducts()
位置: `lib/services/database_service.dart`

```dart
Future<List<Product>> searchProducts(String keyword) async
```

功能:
- 接收搜尋關鍵字
- 對所有商品進行評分
- 按分數排序（高到低）
- 返回排序後的商品列表

### SearchPage._loadProducts()
位置: `lib/pages/search/search_page.dart`

功能:
- 調用 `DatabaseService.searchProducts()`
- 顯示搜尋結果
- 無結果時播報提示訊息

## 使用方式

1. 在首頁的「搜尋」卡片中輸入關鍵字
2. 按下 Enter 鍵提交搜尋
3. 系統會自動導航到搜尋結果頁面
4. 結果按相關性排序顯示

## 無障礙支援

- 搜尋結果數量語音播報
- 切換商品時自動播報商品資訊
- 無搜尋結果時提供語音提示
