# 手勢系統測試清單

## 📋 測試前準備

### 環境設置
- [ ] Flutter 已安裝並更新到最新版本
- [ ] 已執行 `flutter pub get` 獲取依賴
- [ ] 已執行 `flutter analyze` 確認無語法錯誤
- [ ] 測試設備已連接（實體設備或模擬器）

### 數據準備
- [ ] 已初始化測試數據（開發工具頁面 → 初始化所有測試資料）
- [ ] 已登入測試帳號

---

## 🧪 功能測試

### 1. 示範頁面測試

#### 訪問路徑
1. 啟動應用
2. 首頁 → 帳號 → 開發工具
3. 點擊「手勢系統示範」按鈕

#### 測試項目

##### 左右滑動導航
- [ ] **左往右滑**: 從第 N 項切換到第 N-1 項
- [ ] **右往左滑**: 從第 N 項切換到第 N+1 項
- [ ] **循環導航**: 第一項左滑切換到最後一項
- [ ] **循環導航**: 最後一項右滑切換到第一項
- [ ] **視覺反饋**: 當前項目有藍色邊框和陰影
- [ ] **自動滾動**: 切換時自動滾動到可見區域
- [ ] **焦點指示器**: 底部顯示正確的當前項目信息

##### 單擊朗讀
- [ ] 單擊項目播放語音：「商品，[名稱]，價格 [X] 元」
- [ ] 語音內容正確
- [ ] 語音清晰可聽
- [ ] 連續單擊不同項目，語音正確切換

##### 雙擊激活
- [ ] 快速雙擊項目顯示 SnackBar
- [ ] SnackBar 顯示「已選取：[名稱]」
- [ ] 不同項目雙擊顯示不同名稱
- [ ] 雙擊間隔過長（>300ms）不觸發

##### 全局手勢
- [ ] **雙指上滑**: 回到首頁
- [ ] **雙指下滑**: 返回到開發工具頁面
- [ ] **雙指下滑（首頁）**: 提示「已在最上層頁面」
- [ ] **語音提示**: 正確播放「回到首頁」或「返回上一頁」

---

### 2. 實際頁面測試

#### 2.1 訂單歷史頁面

路徑: 首頁 → 帳號 → 開發工具 → 初始化測試數據 → 首頁 → 訂單

- [ ] 頁面使用 `GlobalGestureScaffold` 或 `UnifiedGestureScaffold`
- [ ] 雙指上滑回首頁
- [ ] 雙指下滑返回上一頁

#### 2.2 設定頁面

路徑: 首頁 → 帳號

**注意**: 此頁面使用 PageView，應使用 `GlobalGestureWrapper`

- [ ] 左右滑動卡片功能正常（PageView 原生滑動）
- [ ] 雙指上滑回首頁
- [ ] 雙指下滑返回上一頁
- [ ] 單擊卡片播放語音
- [ ] 雙擊卡片進入對應頁面

#### 2.3 購物車頁面

路徑: 首頁 → 購物車

- [ ] 使用統一手勢包裝器
- [ ] 如已實現焦點導航：左右滑切換商品項目
- [ ] 如已實現焦點導航：單擊朗讀商品信息
- [ ] 如已實現焦點導航：雙擊選取商品
- [ ] 雙指上滑回首頁
- [ ] 雙指下滑返回上一頁

#### 2.4 商品搜尋頁面

路徑: 首頁 → 搜尋圖標

- [ ] 使用統一手勢包裝器
- [ ] 雙指上滑回首頁
- [ ] 雙指下滑返回上一頁

---

### 3. 系統無障礙兼容性測試

#### 3.1 Android (TalkBack)

##### 啟用 TalkBack
1. 設定 > 無障礙功能 > TalkBack
2. 開啟 TalkBack
3. 完成教學流程

##### 測試項目
- [ ] 應用自動切換到系統模式（查看控制台日誌）
- [ ] `shouldUseSystemAccessibility` = `true`
- [ ] `shouldUseCustomTTS` = `false`
- [ ] `shouldUseCustomGestures` = `false`
- [ ] 使用 TalkBack 手勢導航應用無衝突
- [ ] 單指右滑切換元素（TalkBack 原生功能）
- [ ] 雙擊激活元素（TalkBack 原生功能）
- [ ] 自訂雙指上/下滑手勢已停用
- [ ] TalkBack 正確朗讀 Semantics 標籤

##### 關閉 TalkBack
- [ ] 應用自動切換回自訂模式
- [ ] 自訂手勢恢復運作

#### 3.2 iOS (VoiceOver)

##### 啟用 VoiceOver
1. 設定 > 輔助使用 > 旁白
2. 開啟旁白
3. 完成教學流程

##### 測試項目
- [ ] 應用自動切換到系統模式
- [ ] `shouldUseSystemAccessibility` = `true`
- [ ] 使用 VoiceOver 手勢導航應用無衝突
- [ ] 右滑切換元素（VoiceOver 原生功能）
- [ ] 雙擊激活元素（VoiceOver 原生功能）
- [ ] 自訂雙指上/下滑手勢已停用
- [ ] VoiceOver 正確朗讀 Semantics 標籤

##### 關閉 VoiceOver
- [ ] 應用自動切換回自訂模式
- [ ] 自訂手勢恢復運作

---

### 4. 手勢靈敏度測試

#### 滑動距離閾值

##### 水平滑動（預設 50px）
- [ ] 滑動 49px 不觸發切換
- [ ] 滑動 51px 觸發切換
- [ ] 快速滑動正確識別
- [ ] 緩慢滑動正確識別

##### 垂直滑動（預設 50px）
- [ ] 雙指上滑 49px 不觸發
- [ ] 雙指上滑 51px 觸發回首頁
- [ ] 雙指下滑 49px 不觸發
- [ ] 雙指下滑 51px 觸發返回

#### 雙擊檢測

##### 時間間隔（預設 300ms）
- [ ] 250ms 內雙擊觸發激活
- [ ] 350ms 內雙擊不觸發（執行兩次朗讀）
- [ ] 連續三次點擊：前兩次觸發雙擊，第三次觸發朗讀

##### 位置距離（預設 50px）
- [ ] 兩次點擊相距 30px 觸發雙擊
- [ ] 兩次點擊相距 60px 不觸發雙擊

---

### 5. 邊界情況測試

#### 空列表
- [ ] 無可聚焦元素時左右滑不崩潰
- [ ] 顯示適當的空狀態訊息

#### 單一項目
- [ ] 只有一個項目時左右滑循環
- [ ] 單擊朗讀正常
- [ ] 雙擊激活正常

#### 動態列表
- [ ] 添加項目後重新註冊焦點
- [ ] 刪除項目後重新註冊焦點
- [ ] 當前聚焦項目被刪除時焦點轉移正確

#### 頁面導航
- [ ] 離開頁面時焦點服務已清理
- [ ] 返回頁面時焦點服務重新初始化
- [ ] 頁面堆疊深度不影響手勢功能

---

### 6. 性能測試

#### 響應速度
- [ ] 手勢檢測延遲 < 100ms
- [ ] 語音播放延遲 < 200ms
- [ ] 頁面導航延遲 < 300ms
- [ ] 無明顯卡頓或掉幀

#### 資源使用
- [ ] 正常使用時記憶體穩定
- [ ] 頁面切換不造成記憶體洩漏
- [ ] CPU 使用率正常
- [ ] 長時間使用無崩潰

---

## 🐛 已知問題記錄

### 問題 1: [標題]
- **描述**:
- **重現步驟**:
  1.
  2.
  3.
- **預期行為**:
- **實際行為**:
- **嚴重程度**: [高/中/低]
- **狀態**: [待修復/已修復/預期行為]

---

## 📊 測試結果總結

### 功能測試
- 通過: _____ / _____
- 失敗: _____
- 通過率: _____%

### 兼容性測試
- Android TalkBack: [ ] 通過 [ ] 失敗
- iOS VoiceOver: [ ] 通過 [ ] 失敗

### 性能測試
- [ ] 通過
- [ ] 失敗
- 問題描述: _____________

---

## ✅ 測試完成確認

- [ ] 所有功能測試已完成
- [ ] 所有兼容性測試已完成
- [ ] 所有邊界情況已測試
- [ ] 性能測試已完成
- [ ] 已知問題已記錄
- [ ] 測試結果已提交

---

## 📝 測試人員

- **測試人員**: _______________
- **測試日期**: _______________
- **測試環境**:
  - Flutter 版本: _______________
  - 設備型號: _______________
  - 系統版本: _______________

---

## 📎 附註

- 測試過程中發現的任何異常行為都應記錄在「已知問題記錄」中
- 對於失敗的測試項目，應詳細描述失敗原因和重現步驟
- 建議在至少 2 台不同的設備上進行測試
