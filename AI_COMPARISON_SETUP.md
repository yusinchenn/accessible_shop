# AI 商品比較功能設置指南

## 功能簡介

本應用整合了 DeepSeek AI 智能比較功能，可以自動分析購物車中的商品，並提供專業的比較建議。

## 功能特色

- ✅ **自動比較**：進入比較頁面時自動觸發 AI 分析
- ✅ **語音朗讀**：比較結果會自動朗讀，方便視障用戶
- ✅ **視覺呈現**：比較結果同時顯示在螢幕上供查看
- ✅ **全面分析**：比較商品名稱、價格、評分、商家、評論等多個維度
- ✅ **安全設計**：API Key 安全存放，不會被提交到版本控制

## 設置步驟

### 1. 取得 DeepSeek API Key

1. 前往 [DeepSeek 平台](https://platform.deepseek.com/)
2. 註冊/登入帳號
3. 進入 [API Keys 頁面](https://platform.deepseek.com/api_keys)
4. 點擊「Create API Key」創建新的 API Key
5. 複製您的 API Key（格式類似：`sk-xxxxxxxxxxxxxxxxxx`）

### 2. 配置環境變數

1. 在專案根目錄找到 `.env` 檔案
   - 如果沒有此檔案，可以複製 `.env.example` 並重新命名為 `.env`

2. 打開 `.env` 檔案，將您的 API Key 填入：

```env
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxx
```

⚠️ **重要提醒**：
- 請將 `sk-xxxxxxxxxxxxxxxxxx` 替換為您實際的 API Key
- `.env` 檔案已被加入 `.gitignore`，不會被提交到版本控制
- 請勿將 API Key 分享給他人或公開到網路上

### 3. 安裝依賴套件

在專案根目錄執行：

```bash
flutter pub get
```

### 4. 測試功能

1. 啟動應用程式
2. 登入後進入購物車頁面
3. 長按商品卡片，選擇「加入比較」（至少加入 2 個商品）
4. 點擊「查看比較」按鈕進入比較頁面
5. AI 會自動開始分析並朗讀比較結果

## 使用說明

### 如何加入商品到比較清單

1. 進入購物車頁面
2. 長按想要比較的商品卡片
3. 在彈出的選單中，雙擊「加入比較」按鈕
4. 重複以上步驟加入其他商品（最多 5 個）

### 如何查看 AI 比較結果

1. 在購物車頁面上方，雙擊「查看比較」按鈕
2. 進入比較頁面後，AI 會自動開始分析
3. 分析完成後會自動朗讀比較結果
4. 比較結果同時會顯示在螢幕上的綠色區域

### 如何重新比較

在比較頁面下方，雙擊「重新 AI 比較」按鈕即可重新分析。

### 比較內容包含

AI 會從以下維度進行分析：

- **價格比較**：價格差異、性價比分析
- **評分與評論**：商品評分、評論數量、用戶評價
- **商家信譽**：商家評分、粉絲數、服務品質
- **商品特色**：規格、描述、分類等差異
- **購買建議**：根據不同需求給出推薦

## 常見問題

### Q: 顯示「API Key 未設置或無效」怎麼辦？

A: 請檢查以下事項：
1. 確認 `.env` 檔案存在於專案根目錄
2. 確認 `DEEPSEEK_API_KEY` 的值不是 `your_deepseek_api_key_here`
3. 確認 API Key 格式正確（以 `sk-` 開頭）
4. 重新啟動應用程式

### Q: 顯示「無法連接到 DeepSeek API 服務」怎麼辦？

A: 請檢查：
1. 網路連線是否正常
2. API Key 是否有效（可能已過期或被撤銷）
3. DeepSeek 服務是否正常運作

### Q: 比較結果沒有朗讀？

A: 請檢查：
1. 裝置音量是否開啟
2. TTS（文字轉語音）服務是否正常
3. 應用程式是否有音訊權限

### Q: 可以比較幾個商品？

A: 最少需要 2 個商品，最多可以同時比較 5 個商品。

### Q: API 費用如何計算？

A: DeepSeek API 採用 token 計費制，具體費率請參考 [DeepSeek 定價頁面](https://platform.deepseek.com/pricing)。一般來說，商品比較功能每次調用的成本非常低廉。

## 技術架構

```
├── lib/
│   ├── services/
│   │   ├── product_comparison_service.dart  # AI 比較服務
│   │   └── openai_client.dart               # API 客戶端
│   ├── providers/
│   │   └── comparison_provider.dart         # 比較狀態管理
│   └── pages/
│       └── comparison/
│           └── comparison_page.dart         # 比較頁面 UI
├── .env                                     # 環境變數（請勿提交）
└── .env.example                             # 環境變數範本
```

## 安全提醒

1. ❌ **不要**將 `.env` 檔案提交到 Git
2. ❌ **不要**在程式碼中硬編碼 API Key
3. ❌ **不要**將 API Key 分享給他人
4. ✅ **請**妥善保管您的 API Key
5. ✅ **請**定期檢查 API 使用量和費用

## 問題回報

如果遇到任何問題，請提供以下資訊：

- 錯誤訊息截圖
- 是否正確設置 `.env` 檔案
- DeepSeek API 連線測試結果
- Flutter 版本資訊

---

最後更新：2025-10-24
